# Maestro Platform - Centralized Infrastructure Configuration
# Generated: 2025-10-24
# Purpose: Shared infrastructure for ALL Maestro services

# ============================================================================
# POSTGRESQL - Single Instance, Multiple Databases
# ============================================================================
MAESTRO_POSTGRES_ADMIN_USER=maestro_admin
MAESTRO_POSTGRES_ADMIN_PASSWORD=maestro_secure_admin_2025_change_me

# Database-specific passwords (one per service)
QUALITY_FABRIC_DB_PASSWORD=qf_db_secure_2025
MAESTRO_V2_DB_PASSWORD=mv2_db_secure_2025
MAESTRO_FRONTEND_DB_PASSWORD=mfe_db_secure_2025

# Connection strings (services use these)
MAESTRO_POSTGRES_HOST=maestro-postgres
MAESTRO_POSTGRES_PORT=25432

# ============================================================================
# REDIS - Single Instance, Multiple Databases/Namespaces
# ============================================================================
MAESTRO_REDIS_PASSWORD=maestro_redis_secure_2025

# Redis connection
MAESTRO_REDIS_HOST=maestro-redis
MAESTRO_REDIS_PORT=27379

# Service-specific Redis databases
QUALITY_FABRIC_REDIS_DB=0
MAESTRO_V2_REDIS_DB=1
MAESTRO_FRONTEND_REDIS_DB=2

# ============================================================================
# GRAFANA - Single Instance with Organizations (RBAC)
# ============================================================================
MAESTRO_GRAFANA_ADMIN_USER=admin
MAESTRO_GRAFANA_ADMIN_PASSWORD=grafana_secure_admin_2025_change_me

GRAFANA_PORT=23000

# ============================================================================
# PROMETHEUS - Single Instance with Service Discovery
# ============================================================================
PROMETHEUS_PORT=29090

# ============================================================================
# JAEGER - Distributed Tracing
# ============================================================================
JAEGER_UI_PORT=26686
JAEGER_COLLECTOR_PORT=24268

# ============================================================================
# RABBITMQ - Message Broker (Optional)
# ============================================================================
MAESTRO_RABBITMQ_USER=maestro
MAESTRO_RABBITMQ_PASSWORD=rabbitmq_secure_2025_change_me
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672

# ============================================================================
# MINIO - S3-Compatible Object Storage
# ============================================================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=m3RfKg0yvTCuvmTKI9KSWBc53MA1EMOE/3xAXVj5yeM=
MINIO_API_PORT=29000
MINIO_CONSOLE_PORT=29001

# MinIO Storage Buckets (auto-created on startup)
# - mlflow-artifacts: MLflow experiment artifacts
# - dvc-storage: DVC data version control
# - nexus-blobs: Nexus blob storage
# - harbor-registry: Harbor container images
# - backups: Infrastructure backups

# ============================================================================
# HARBOR - Container Registry
# ============================================================================
HARBOR_ADMIN_PASSWORD=xjUcx+GFzkH6HeTaUJH9NrrMTXtuxDwvbhOqng3RSKs=
HARBOR_DB_PASSWORD=lC02IugGdAYOs/VkEcq/7esxRtTRcAvzRe1xg5sFjxI=
HARBOR_CORE_SECRET=dUb7KvwzwwHL0xnvhE7kz8uce1gn20VlQZtUnESoW70=
HARBOR_JOBSERVICE_SECRET=Ey/Lyp/Kg0MWAZOGXM6MmanbKV4fS7djwcx+dtIcY+4=
HARBOR_REGISTRY_SECRET=pGO7LJzdFe3wcwiq70TqZzQQRHJhK+Kuoy1sWJOjK1Y=
HARBOR_HTTP_PORT=28080
HARBOR_CACHE_TYPE=redis
HARBOR_CACHE_REDIS_ADDR=maestro-harbor-redis:6379

# Harbor Projects (to be created manually or via API):
# - maestro-hive
# - maestro-frontend
# - maestro-engine
# - execution-platform
# - quality-fabric

# ============================================================================
# NEXUS OSS - Universal Artifact Repository
# ============================================================================
NEXUS_ADMIN_PASSWORD=nexus_admin_2025_change_me
NEXUS_WEB_PORT=28081
NEXUS_DOCKER_PORT=28082
NEXUS_PYPI_PORT=28083
NEXUS_NPM_PORT=28084

# Nexus Repositories (to be configured post-installation):
# - maven-central (proxy)
# - npm-registry (proxy + hosted)
# - pypi-registry (proxy + hosted)
# - docker-hub (proxy)
# - maestro-releases (hosted - release artifacts)
# - maestro-snapshots (hosted - snapshot artifacts)

# ============================================================================
# MLFLOW - ML Experiment Tracking & Model Registry
# ============================================================================
MLFLOW_PORT=25000
# MLflow uses PostgreSQL (mlflow database) and MinIO (mlflow-artifacts bucket)
# Connection configured via docker-compose

# ============================================================================
# NETWORK
# ============================================================================
MAESTRO_NETWORK_NAME=maestro-network

# ============================================================================
# VOLUMES
# ============================================================================
POSTGRES_DATA_VOLUME=maestro_postgres_data
REDIS_DATA_VOLUME=maestro_redis_data
GRAFANA_DATA_VOLUME=maestro_grafana_data
PROMETHEUS_DATA_VOLUME=maestro_prometheus_data
MINIO_DATA_VOLUME=maestro_minio_data
HARBOR_DB_DATA_VOLUME=maestro_harbor_db_data
HARBOR_CORE_DATA_VOLUME=maestro_harbor_core_data
HARBOR_REGISTRY_DATA_VOLUME=maestro_harbor_registry_data
NEXUS_DATA_VOLUME=maestro_nexus_data
MLFLOW_DATA_VOLUME=maestro_mlflow_data

# ============================================================================
# STORAGE CONFIGURATION - Environment-Specific
# ============================================================================
# For development/test: use MinIO (local S3-compatible storage)
ARTIFACT_STORAGE_TYPE=minio
ARTIFACT_STORAGE_ENDPOINT=http://maestro-minio:9000
ARTIFACT_STORAGE_ACCESS_KEY=${MINIO_ROOT_USER}
ARTIFACT_STORAGE_SECRET_KEY=${MINIO_ROOT_PASSWORD}

# For production: switch to AWS S3
# ARTIFACT_STORAGE_TYPE=s3
# ARTIFACT_STORAGE_ENDPOINT=https://s3.amazonaws.com
# ARTIFACT_STORAGE_ACCESS_KEY=<AWS_ACCESS_KEY>
# ARTIFACT_STORAGE_SECRET_KEY=<AWS_SECRET_KEY>
# ARTIFACT_STORAGE_REGION=us-east-1
