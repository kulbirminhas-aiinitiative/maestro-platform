openapi: 3.0.3
info:
  title: Sunday.com API
  description: |
    Comprehensive API documentation for Sunday.com work management platform.

    ## Authentication
    All API endpoints require authentication via JWT token in the Authorization header:
    ```
    Authorization: Bearer <token>
    ```

    ## Rate Limiting
    - 1000 requests per hour for authenticated users
    - 100 requests per hour for unauthenticated users

    ## Error Responses
    All error responses follow a consistent format:
    ```json
    {
      "error": {
        "type": "validation_error",
        "message": "Invalid request data",
        "details": {},
        "requestId": "uuid"
      }
    }
    ```

    ## Pagination
    List endpoints support cursor and offset-based pagination:
    ```
    GET /api/v1/boards?page=1&limit=20
    ```

  version: 1.0.0
  contact:
    name: Sunday.com Team
    email: api@sunday.com
    url: https://sunday.com/docs
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: https://sunday.com/terms

servers:
  - url: https://api.sunday.com/api/v1
    description: Production server
  - url: https://staging-api.sunday.com/api/v1
    description: Staging server
  - url: http://localhost:3000/api/v1
    description: Development server

security:
  - bearerAuth: []

# ============================================================================
# AUTHENTICATION
# ============================================================================

paths:
  /auth/login:
    post:
      tags: [Authentication]
      summary: User login
      description: Authenticate user with email and password
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email, password]
              properties:
                email:
                  type: string
                  format: email
                  example: john@example.com
                password:
                  type: string
                  format: password
                  example: securePassword123
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/AuthTokens'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '422':
          $ref: '#/components/responses/ValidationError'

  /auth/register:
    post:
      tags: [Authentication]
      summary: User registration
      description: Create a new user account
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email, password]
              properties:
                email:
                  type: string
                  format: email
                  example: john@example.com
                password:
                  type: string
                  format: password
                  minLength: 8
                  example: securePassword123
                firstName:
                  type: string
                  example: John
                lastName:
                  type: string
                  example: Doe
      responses:
        '201':
          description: Registration successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/AuthTokens'
        '422':
          $ref: '#/components/responses/ValidationError'

  /auth/refresh:
    post:
      tags: [Authentication]
      summary: Refresh access token
      description: Get new access token using refresh token
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [refreshToken]
              properties:
                refreshToken:
                  type: string
                  example: "refresh_token_string"
      responses:
        '200':
          description: Token refreshed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/AuthTokens'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

# ============================================================================
# ORGANIZATIONS
# ============================================================================

  /organizations:
    get:
      tags: [Organizations]
      summary: List user's organizations
      description: Get all organizations where the user is a member
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
      responses:
        '200':
          description: Organizations retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Organization'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'

    post:
      tags: [Organizations]
      summary: Create organization
      description: Create a new organization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrganizationRequest'
      responses:
        '201':
          description: Organization created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Organization'
        '422':
          $ref: '#/components/responses/ValidationError'

  /organizations/{organizationId}:
    get:
      tags: [Organizations]
      summary: Get organization
      description: Get organization details by ID
      parameters:
        - $ref: '#/components/parameters/OrganizationId'
      responses:
        '200':
          description: Organization retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Organization'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags: [Organizations]
      summary: Update organization
      description: Update organization details
      parameters:
        - $ref: '#/components/parameters/OrganizationId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateOrganizationRequest'
      responses:
        '200':
          description: Organization updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Organization'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '422':
          $ref: '#/components/responses/ValidationError'

    delete:
      tags: [Organizations]
      summary: Delete organization
      description: Soft delete an organization
      parameters:
        - $ref: '#/components/parameters/OrganizationId'
      responses:
        '204':
          description: Organization deleted successfully
        '404':
          $ref: '#/components/responses/NotFoundError'

# ============================================================================
# WORKSPACES
# ============================================================================

  /workspaces:
    get:
      tags: [Workspaces]
      summary: List workspaces
      description: Get all workspaces in the user's organizations
      parameters:
        - in: query
          name: organizationId
          schema:
            type: string
            format: uuid
          description: Filter by organization ID
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
      responses:
        '200':
          description: Workspaces retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Workspace'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'

    post:
      tags: [Workspaces]
      summary: Create workspace
      description: Create a new workspace in an organization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWorkspaceRequest'
      responses:
        '201':
          description: Workspace created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Workspace'
        '422':
          $ref: '#/components/responses/ValidationError'

  /workspaces/{workspaceId}:
    get:
      tags: [Workspaces]
      summary: Get workspace
      description: Get workspace details by ID
      parameters:
        - $ref: '#/components/parameters/WorkspaceId'
      responses:
        '200':
          description: Workspace retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Workspace'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags: [Workspaces]
      summary: Update workspace
      description: Update workspace details
      parameters:
        - $ref: '#/components/parameters/WorkspaceId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateWorkspaceRequest'
      responses:
        '200':
          description: Workspace updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Workspace'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '422':
          $ref: '#/components/responses/ValidationError'

    delete:
      tags: [Workspaces]
      summary: Delete workspace
      description: Soft delete a workspace
      parameters:
        - $ref: '#/components/parameters/WorkspaceId'
      responses:
        '204':
          description: Workspace deleted successfully
        '404':
          $ref: '#/components/responses/NotFoundError'

# ============================================================================
# BOARDS
# ============================================================================

  /boards/workspace/{workspaceId}:
    get:
      tags: [Boards]
      summary: List workspace boards
      description: Get all boards in a workspace
      parameters:
        - $ref: '#/components/parameters/WorkspaceId'
        - in: query
          name: folderId
          schema:
            type: string
            format: uuid
          description: Filter by folder ID
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
      responses:
        '200':
          description: Boards retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Board'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'

  /boards:
    post:
      tags: [Boards]
      summary: Create board
      description: Create a new board in a workspace
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBoardRequest'
      responses:
        '201':
          description: Board created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Board'
        '422':
          $ref: '#/components/responses/ValidationError'

  /boards/{boardId}:
    get:
      tags: [Boards]
      summary: Get board
      description: Get board details with optional related data
      parameters:
        - $ref: '#/components/parameters/BoardId'
        - in: query
          name: includeColumns
          schema:
            type: boolean
            default: true
          description: Include board columns
        - in: query
          name: includeItems
          schema:
            type: boolean
            default: false
          description: Include board items
        - in: query
          name: includeMembers
          schema:
            type: boolean
            default: false
          description: Include board members
      responses:
        '200':
          description: Board retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/BoardWithRelations'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags: [Boards]
      summary: Update board
      description: Update board details
      parameters:
        - $ref: '#/components/parameters/BoardId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateBoardRequest'
      responses:
        '200':
          description: Board updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Board'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '422':
          $ref: '#/components/responses/ValidationError'

    delete:
      tags: [Boards]
      summary: Delete board
      description: Soft delete a board
      parameters:
        - $ref: '#/components/parameters/BoardId'
      responses:
        '204':
          description: Board deleted successfully
        '404':
          $ref: '#/components/responses/NotFoundError'

  /boards/{boardId}/columns:
    post:
      tags: [Boards]
      summary: Create board column
      description: Add a new column to a board
      parameters:
        - $ref: '#/components/parameters/BoardId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateColumnRequest'
      responses:
        '201':
          description: Column created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/BoardColumn'
        '422':
          $ref: '#/components/responses/ValidationError'

  /boards/{boardId}/columns/{columnId}:
    put:
      tags: [Boards]
      summary: Update board column
      description: Update column details
      parameters:
        - $ref: '#/components/parameters/BoardId'
        - $ref: '#/components/parameters/ColumnId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateColumnRequest'
      responses:
        '200':
          description: Column updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/BoardColumn'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags: [Boards]
      summary: Delete board column
      description: Remove a column from a board
      parameters:
        - $ref: '#/components/parameters/BoardId'
        - $ref: '#/components/parameters/ColumnId'
      responses:
        '204':
          description: Column deleted successfully
        '404':
          $ref: '#/components/responses/NotFoundError'

  /boards/{boardId}/members:
    get:
      tags: [Boards]
      summary: List board members
      description: Get all members of a board
      parameters:
        - $ref: '#/components/parameters/BoardId'
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
      responses:
        '200':
          description: Board members retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/BoardMember'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'

    post:
      tags: [Boards]
      summary: Add board member
      description: Add a user to a board with specified role
      parameters:
        - $ref: '#/components/parameters/BoardId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddMemberRequest'
      responses:
        '201':
          description: Member added successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/BoardMember'
        '422':
          $ref: '#/components/responses/ValidationError'

  /boards/{boardId}/members/{userId}:
    put:
      tags: [Boards]
      summary: Update board member
      description: Update member role and permissions
      parameters:
        - $ref: '#/components/parameters/BoardId'
        - $ref: '#/components/parameters/UserId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateMemberRequest'
      responses:
        '200':
          description: Member updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/BoardMember'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags: [Boards]
      summary: Remove board member
      description: Remove a user from a board
      parameters:
        - $ref: '#/components/parameters/BoardId'
        - $ref: '#/components/parameters/UserId'
      responses:
        '204':
          description: Member removed successfully
        '404':
          $ref: '#/components/responses/NotFoundError'

  /boards/{boardId}/statistics:
    get:
      tags: [Boards]
      summary: Get board statistics
      description: Get comprehensive board statistics
      parameters:
        - $ref: '#/components/parameters/BoardId'
      responses:
        '200':
          description: Statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/BoardStatistics'

# ============================================================================
# ITEMS
# ============================================================================

  /items:
    post:
      tags: [Items]
      summary: Create item
      description: Create a new item on a board
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateItemRequest'
      responses:
        '201':
          description: Item created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/ItemWithRelations'
        '422':
          $ref: '#/components/responses/ValidationError'

  /items/{itemId}:
    get:
      tags: [Items]
      summary: Get item
      description: Get item details with related data
      parameters:
        - $ref: '#/components/parameters/ItemId'
        - in: query
          name: includeComments
          schema:
            type: boolean
            default: false
          description: Include item comments
        - in: query
          name: includeChildren
          schema:
            type: boolean
            default: false
          description: Include child items
      responses:
        '200':
          description: Item retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/ItemWithRelations'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags: [Items]
      summary: Update item
      description: Update item details and properties
      parameters:
        - $ref: '#/components/parameters/ItemId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateItemRequest'
      responses:
        '200':
          description: Item updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/ItemWithRelations'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '422':
          $ref: '#/components/responses/ValidationError'

    delete:
      tags: [Items]
      summary: Delete item
      description: Soft delete an item
      parameters:
        - $ref: '#/components/parameters/ItemId'
      responses:
        '204':
          description: Item deleted successfully
        '404':
          $ref: '#/components/responses/NotFoundError'

  /items/bulk:
    put:
      tags: [Items]
      summary: Bulk update items
      description: Update multiple items in a single request
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BulkUpdateItemsRequest'
      responses:
        '200':
          description: Items updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      updated:
                        type: array
                        items:
                          $ref: '#/components/schemas/Item'
                      failed:
                        type: array
                        items:
                          type: object
                          properties:
                            itemId:
                              type: string
                            error:
                              type: string
        '422':
          $ref: '#/components/responses/ValidationError'

  /items/{itemId}/move:
    post:
      tags: [Items]
      summary: Move item
      description: Move an item to a different position or board
      parameters:
        - $ref: '#/components/parameters/ItemId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MoveItemRequest'
      responses:
        '200':
          description: Item moved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Item'
        '422':
          $ref: '#/components/responses/ValidationError'

# ============================================================================
# COMPONENTS
# ============================================================================

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  parameters:
    OrganizationId:
      name: organizationId
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Organization ID

    WorkspaceId:
      name: workspaceId
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Workspace ID

    BoardId:
      name: boardId
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Board ID

    ItemId:
      name: itemId
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Item ID

    ColumnId:
      name: columnId
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Column ID

    UserId:
      name: userId
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: User ID

  schemas:
    # Auth Schemas
    AuthTokens:
      type: object
      properties:
        accessToken:
          type: string
          description: JWT access token
        refreshToken:
          type: string
          description: JWT refresh token
        expiresIn:
          type: integer
          description: Access token expiration time in seconds
        user:
          $ref: '#/components/schemas/User'

    # Core Entity Schemas
    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
        email:
          type: string
          format: email
        firstName:
          type: string
          nullable: true
        lastName:
          type: string
          nullable: true
        avatarUrl:
          type: string
          format: uri
          nullable: true
        timezone:
          type: string
          default: "UTC"
        locale:
          type: string
          default: "en"
        settings:
          type: object
          additionalProperties: true
        lastLoginAt:
          type: string
          format: date-time
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Organization:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        slug:
          type: string
        domain:
          type: string
          nullable: true
        settings:
          type: object
          additionalProperties: true
        subscriptionPlan:
          type: string
          enum: [free, pro, enterprise]
        subscriptionStatus:
          type: string
          enum: [active, inactive, cancelled]
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Workspace:
      type: object
      properties:
        id:
          type: string
          format: uuid
        organizationId:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
          nullable: true
        color:
          type: string
          pattern: '^#[0-9A-Fa-f]{6}$'
        settings:
          type: object
          additionalProperties: true
        isPrivate:
          type: boolean
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Board:
      type: object
      properties:
        id:
          type: string
          format: uuid
        workspaceId:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
          nullable: true
        settings:
          type: object
          additionalProperties: true
        isPrivate:
          type: boolean
        position:
          type: number
        createdBy:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    BoardWithRelations:
      allOf:
        - $ref: '#/components/schemas/Board'
        - type: object
          properties:
            columns:
              type: array
              items:
                $ref: '#/components/schemas/BoardColumn'
            items:
              type: array
              items:
                $ref: '#/components/schemas/ItemWithRelations'
            members:
              type: array
              items:
                $ref: '#/components/schemas/BoardMember'
            creator:
              $ref: '#/components/schemas/User'
            _count:
              type: object
              properties:
                items:
                  type: integer
                members:
                  type: integer
                columns:
                  type: integer

    BoardColumn:
      type: object
      properties:
        id:
          type: string
          format: uuid
        boardId:
          type: string
          format: uuid
        name:
          type: string
        color:
          type: string
          pattern: '^#[0-9A-Fa-f]{6}$'
        position:
          type: integer
        settings:
          type: object
          additionalProperties: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    BoardMember:
      type: object
      properties:
        id:
          type: string
          format: uuid
        boardId:
          type: string
          format: uuid
        userId:
          type: string
          format: uuid
        role:
          type: string
          enum: [admin, member, viewer]
        permissions:
          type: object
          additionalProperties: true
        createdAt:
          type: string
          format: date-time
        user:
          $ref: '#/components/schemas/User'

    Item:
      type: object
      properties:
        id:
          type: string
          format: uuid
        boardId:
          type: string
          format: uuid
        parentId:
          type: string
          format: uuid
          nullable: true
        name:
          type: string
        description:
          type: string
          nullable: true
        itemData:
          type: object
          additionalProperties: true
          description: Custom field data
        position:
          type: number
        createdBy:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    ItemWithRelations:
      allOf:
        - $ref: '#/components/schemas/Item'
        - type: object
          properties:
            assignments:
              type: array
              items:
                $ref: '#/components/schemas/ItemAssignment'
            parent:
              $ref: '#/components/schemas/Item'
            children:
              type: array
              items:
                $ref: '#/components/schemas/Item'
            comments:
              type: array
              items:
                $ref: '#/components/schemas/Comment'
            creator:
              $ref: '#/components/schemas/User'
            _count:
              type: object
              properties:
                comments:
                  type: integer
                children:
                  type: integer
                dependencies:
                  type: integer

    ItemAssignment:
      type: object
      properties:
        id:
          type: string
          format: uuid
        itemId:
          type: string
          format: uuid
        userId:
          type: string
          format: uuid
        assignedBy:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        user:
          $ref: '#/components/schemas/User'

    Comment:
      type: object
      properties:
        id:
          type: string
          format: uuid
        itemId:
          type: string
          format: uuid
        userId:
          type: string
          format: uuid
        content:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        user:
          $ref: '#/components/schemas/User'

    BoardStatistics:
      type: object
      properties:
        totalItems:
          type: integer
        completedItems:
          type: integer
        totalMembers:
          type: integer
        totalColumns:
          type: integer
        activeMembersToday:
          type: integer

    PaginationMeta:
      type: object
      properties:
        page:
          type: integer
        limit:
          type: integer
        total:
          type: integer
        totalPages:
          type: integer
        hasNext:
          type: boolean
        hasPrev:
          type: boolean

    # Request Schemas
    CreateOrganizationRequest:
      type: object
      required: [name, slug]
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        slug:
          type: string
          pattern: '^[a-z0-9-]+$'
          minLength: 3
          maxLength: 50
        domain:
          type: string
          format: hostname
        settings:
          type: object
          additionalProperties: true

    UpdateOrganizationRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        domain:
          type: string
          format: hostname
        settings:
          type: object
          additionalProperties: true

    CreateWorkspaceRequest:
      type: object
      required: [name, organizationId]
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
          maxLength: 500
        organizationId:
          type: string
          format: uuid
        color:
          type: string
          pattern: '^#[0-9A-Fa-f]{6}$'
          default: "#6B7280"
        isPrivate:
          type: boolean
          default: false
        settings:
          type: object
          additionalProperties: true

    UpdateWorkspaceRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
          maxLength: 500
        color:
          type: string
          pattern: '^#[0-9A-Fa-f]{6}$'
        isPrivate:
          type: boolean
        settings:
          type: object
          additionalProperties: true

    CreateBoardRequest:
      type: object
      required: [name, workspaceId]
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
          maxLength: 500
        workspaceId:
          type: string
          format: uuid
        folderId:
          type: string
          format: uuid
        isPrivate:
          type: boolean
          default: false
        settings:
          type: object
          additionalProperties: true
        columns:
          type: array
          items:
            type: object
            required: [name]
            properties:
              name:
                type: string
                minLength: 1
                maxLength: 50
              color:
                type: string
                pattern: '^#[0-9A-Fa-f]{6}$'
              settings:
                type: object
                additionalProperties: true

    UpdateBoardRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
          maxLength: 500
        isPrivate:
          type: boolean
        position:
          type: number
        settings:
          type: object
          additionalProperties: true

    CreateColumnRequest:
      type: object
      required: [name]
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 50
        color:
          type: string
          pattern: '^#[0-9A-Fa-f]{6}$'
        position:
          type: integer
        settings:
          type: object
          additionalProperties: true

    UpdateColumnRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 50
        color:
          type: string
          pattern: '^#[0-9A-Fa-f]{6}$'
        position:
          type: integer
        settings:
          type: object
          additionalProperties: true

    AddMemberRequest:
      type: object
      required: [userId]
      properties:
        userId:
          type: string
          format: uuid
        role:
          type: string
          enum: [admin, member, viewer]
          default: member
        permissions:
          type: object
          additionalProperties: true

    UpdateMemberRequest:
      type: object
      properties:
        role:
          type: string
          enum: [admin, member, viewer]
        permissions:
          type: object
          additionalProperties: true

    CreateItemRequest:
      type: object
      required: [name, boardId]
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 200
        description:
          type: string
          maxLength: 2000
        boardId:
          type: string
          format: uuid
        parentId:
          type: string
          format: uuid
        itemData:
          type: object
          additionalProperties: true
          description: Custom field data (status, priority, dates, etc.)
        position:
          type: number
        assigneeIds:
          type: array
          items:
            type: string
            format: uuid

    UpdateItemRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 200
        description:
          type: string
          maxLength: 2000
        itemData:
          type: object
          additionalProperties: true
        position:
          type: number
        assigneeIds:
          type: array
          items:
            type: string
            format: uuid

    BulkUpdateItemsRequest:
      type: object
      required: [items]
      properties:
        items:
          type: array
          items:
            type: object
            required: [id]
            properties:
              id:
                type: string
                format: uuid
              name:
                type: string
                minLength: 1
                maxLength: 200
              description:
                type: string
                maxLength: 2000
              itemData:
                type: object
                additionalProperties: true
              position:
                type: number
              assigneeIds:
                type: array
                items:
                  type: string
                  format: uuid

    MoveItemRequest:
      type: object
      properties:
        boardId:
          type: string
          format: uuid
          description: Target board ID (for moving to different board)
        parentId:
          type: string
          format: uuid
          description: New parent item ID
        position:
          type: number
          description: New position value

    # Error Schemas
    ErrorResponse:
      type: object
      required: [error]
      properties:
        error:
          type: object
          required: [type, message]
          properties:
            type:
              type: string
              example: "validation_error"
            message:
              type: string
              example: "Invalid request data"
            details:
              type: object
              additionalProperties: true
            requestId:
              type: string
              format: uuid

  responses:
    UnauthorizedError:
      description: Authentication required
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              type: "authentication_error"
              message: "Invalid or expired token"
              requestId: "req_123456"

    ForbiddenError:
      description: Insufficient permissions
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              type: "authorization_error"
              message: "Insufficient permissions"
              requestId: "req_123456"

    NotFoundError:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              type: "not_found_error"
              message: "Resource not found"
              requestId: "req_123456"

    ValidationError:
      description: Validation error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              type: "validation_error"
              message: "Invalid request data"
              details:
                name: ["Name is required"]
                email: ["Invalid email format"]
              requestId: "req_123456"

    RateLimitError:
      description: Rate limit exceeded
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              type: "rate_limit_error"
              message: "Rate limit exceeded"
              details:
                retryAfter: 3600
              requestId: "req_123456"

    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              type: "internal_error"
              message: "An unexpected error occurred"
              requestId: "req_123456"

tags:
  - name: Authentication
    description: User authentication and authorization
  - name: Organizations
    description: Organization management
  - name: Workspaces
    description: Workspace management
  - name: Boards
    description: Board and column management
  - name: Items
    description: Item/task management
  - name: Files
    description: File management and attachments
  - name: Comments
    description: Comments and discussions
  - name: Analytics
    description: Analytics and reporting
  - name: AI
    description: AI-powered features
  - name: Automation
    description: Automation and workflows